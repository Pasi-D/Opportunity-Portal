<?php 
  session_start();
  if (!isset($_SESSION["AdminId"])) {
    header("Location: ../Error.html");
    exit();
  }
 ?>
<!DOCTYPE html>
<html lang="en">
  
  <head>
    <script>


      function checkpwd(){
        
        
        var initpass = document.forms["regform"]["upass"].value;
        var confpass = document.forms["regform"]["passconf"].value;
        


        if (initpass != confpass) {
            $("#pwdmissmatch").modal();                       
            return false;
        }


/*        
      //Using ajax we can send the data to the php file without page refreshing itself

        var data = $('#regiform').serialize()

        //Using jquery ajax without page refresh
        $.ajax({
          url: 'sign_up.php',
          type: 'POST',          
          data: data,
          beforeSend: function () {
            $('#error').fadeOut();
            //$('#reg-btn').html('<span class="glyphicon glyphicon-transfer"></span> &nbsp; Registering ...')
          },
          success: function (data) {
            if (data == 1) {
              $('#error').fadeIn(1000, function() {
                $("#error").html('<div class="alert alert-danger"> <span class="glyphicon glyphicon-info-sign"></span> &nbsp; Sorry user already exist !</div>');
              });
            }else if (data == "Registered") {
              setTimeout('$(".regiform").fadeOut(500, function(){ $(".regisForm").load("Reg_form.html"); }); ',5000);
            }
            else{
              $("#error").fadeIn(1000, function(){
           
              $("#error").html('<div class="alert alert-danger"><span class="glyphicon glyphicon-info-sign"></span> &nbsp; Registered</div>');
            }
          }


        });*/
        

      }

      
    </script>


    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>User Registration</title>

    <!-- CSS for page Background -->
    <link href="../css/Reg_Form.css" rel="stylesheet">

    <!-- Bootstrap -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    
    

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body oncontextmenu="return false">
  <p><br></p>

  <div class="body"></div>

    <div class="row">
        <div class="col-md-2"></div>
        <div class="col-md-8">
            <div class="panel panel-default">
              <div class="panel-body" style="">
                <div class="page-header">
                    <div class="header" style="margin-top: 5px">
                      <div><b>USER</b><span><b> REGISTRATION</b></span></div>                      
                    </div>

                   
                        <!-- Error message will be shown here -->
                  
                  
                </div>    
                
                  <form class="form-horizontal" name="regform" style="margin-top: 100px" action="sign_up.php" onsubmit="return checkpwd()" method="POST" autocomplete="off">
                      <div class="form-group">
                        <label for="inputFN" class="col-sm-2 control-label" class="inform">First Name</label>
                        <div class="col-sm-10">
                          <input type="text" class="form-control" id="inputFName" maxlength="20" placeholder="First Name" name="fname" required class="inputfield">                                                   
                        </div>
                        
                      </div>
                       <div class="form-group">
                        <label for="inputLN" class="col-sm-2 control-label" class="inform">Last Name</label>
                        <div class="col-sm-10">
                          <input type="text" class="form-control" id="inputLName" maxlength="20" placeholder="Last Name" name="lname" required class="inputfield">
                        </div>
                        
                      </div>
                      <div class="form-group">
                        <label for="inputNIC" class="col-sm-2 control-label" class="inform">NIC</label>
                        <div class="col-sm-10">
                          <input type="text" class="form-control" id="inputtxtNIC" maxlength="10" placeholder="NIC" name="nic" required class="inputfield">
                        </div>
                        
                      </div>
                      <div class="form-group">
                        <label for="inputGender" class="col-sm-2 control-label">Gender</label>
                        <label class="radio-inline" style="margin-left: 15px">
                          <input type="radio" value="Male" name="sex" checked="checked"> Male
                        </label>
                        <label class="radio-inline">
                          <input type="radio" value="Female" name="sex"> Female
                        </label>                          
                      </div>
                      <!-- District Details Removed
                      <div class="form-group">
                        <label for="inputDistrict" class="col-sm-2 control-label">Select District</label>
                        <select size="1" name="district" id="" class="col-sm-6" style="margin-top: 3px; margin-left: 18px">
                                <option SELECTED value="Ampara">Ampara</option>
                                <option value="Anuradhapura">Anuradhapura</option>
                                <option value="Badulla">Badulla</option>
                                <option value="Batticaloa">Batticaloa</option>
                                <option value="Colombo">Colombo</option>
                                <option value="Galle">Galle</option>
                                <option value="Gampaha">Gampaha</option>
                                <option value="Hambantota">Hambantota</option>
                                <option value="Jaffna">Jaffna</option>
                                <option value="Kalutara">Kalutara</option>
                                <option value="Kandy">Kandy</option>
                                <option value="Kegalle">Kegalle</option>
                                <option value="Kilinochchi">Kilinochchi</option>
                                <option value="Kurunegala">Kurunegala</option>
                                <option value="Mannar">Mannar</option>
                                <option value="Matale">Matale</option>
                                <option value="Matara">Matara</option>
                                <option value="Monragala">Monragala</option>
                                <option value="Mullaitivu">Mullaitivu</option>
                                <option value="Nuwara Eliya">Nuwara Eliya</option>
                                <option value="Polonnaruwa">Polonnaruwa</option>
                                <option value="Puttalam">Puttalam</option>
                                <option value="Ratnapura">Ratnapura</option>
                                <option value="Trincomalee">Trincomalee</option>
                                <option value="Vavuniya">Vavuniya</option>
                      </select>
                      </div> -->
                      <div class="form-group">
                        <label for="inputEmail" class="col-sm-2 control-label" class="inform">Email Address</label>
                        <div class="col-sm-10">
                          <input type="email" class="form-control" id="inputEmail" placeholder="Email Address" name="email" required class="inputfield">
                        </div>                        
                      </div>
                      <!--<div class="form-group" style="margin-left: 150px">
                        <div class="checkbox" >
                          <label>
                            <input type="checkbox" value="Y" name="emailnoti">
                            Send Email Notifications
                          </label>
                        </div>
                      </div>-->

                      <div class="form-group">
                        <label for="inputUN" class="col-sm-2 control-label" class="inform">User Name</label>
                        <div class="col-sm-10">
                          <input type="text" class="form-control" id="inputUName" maxlength="10" placeholder="User Name" name="uname" required class="inputfield">
                        </div>
                      </div>

                      <div class="form-group">
                      <label for="inputPassword" class="col-sm-2 control-label" class="inform">Password</label>
                      <div class="col-sm-10">
                        <input type="password" class="form-control" id="inputPassword" placeholder="Password" name="upass" required class="inputfield">
                      </div>
                      
                    </div>
                        
                     <div class="form-group">
                      <label for="inputConfPassword" class="col-sm-2 control-label" class="inform">Confirm Password</label>
                      <div class="col-sm-10">
                        <input type="password" class="form-control" id="inputConfirmPassword" placeholder="" name="passconf" class="inputfield">
                      </div>
                    </div>  
                                         
                      <div class="form-group">
                        <div class="col-sm-offset-2 col-sm-10">
                          <button type="submit" id="reg-btn" class="btn btn-success" name="btn-reg">Register</button>
                        </div>
                      </div>
                      <input type="hidden" name="AdminId" value="<? echo $session ?>">
                  </form>
  
              </div>
            </div>
        </div>
        <div class="col-md-2"></div>
    </div>
    
    <!-- Popup Modal Files -->

    <div class="container">
      <!-- Small Modal to notify password missmatch -->      
      <div class="modal fade" id="pwdmissmatch" role="dialog">
        <div class="modal-dialog">        
          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h5 class="modal-title"><b>Password Missmatched</b></h5>
            </div>
            <div class="modal-body">
              <p>Retype the password</p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div> 
        </div>         
      </div>

      <div class="modal fade" id="fillforms" role="dialog">
        <div class="modal-dialog">        
          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h5 class="modal-title"><b>Fill the missing sections</b></h5>
            </div>
            <div class="modal-body">
              <p>You missed a few things</p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div> 
        </div>         
      </div>

      <div class="modal fade" id="invalidEmail" role="dialog">
        <div class="modal-dialog">        
          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h5 class="modal-title"><b>Invalid Email</b></h5>
            </div>
            <div class="modal-body">
              <p>Please recheck your Email Address</p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div> 
        </div>         
      </div>

    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="../js/bootstrap.min.js"></script>
    <script>
      //Incomplete side show script
      $('input').blur(function(){
          if( !$(this).val() ) {
              $(this).popover({
                  title: 'Warning!',
                  content: 'Value can not be empty',
                  placement: 'right'
              }).popover('show');
          } else {
              $(this).popover('destroy');
          }
      })
    </script>
  </body>
</html>
